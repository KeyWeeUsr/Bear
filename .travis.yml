sudo: required

language: python
os:
    - linux
    - osx

python:
    - "3.6"

jobs:
    include:
        - stage: style
          script:
              - pip install --editable .[ci,dev]
              - python check.py
              - coveralls || true

        - stage: deploy
          script: python release.py

stages:
    # run this stage when not deploying for each branch+tag
    - name: style
      if: NOT (type = api)

    # run only on master branch if triggered manually
    - name: deploy
      if: (branch = master) AND (NOT (type IN (push, pull_request)))
